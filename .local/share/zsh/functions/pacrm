__select_installed() {
  paru --query --quiet --explicit \
    | fzf \
      --multi \
      --ansi \
      --preview 'paru --sync --info {}' \
      --preview-window="$FZF_DEFAULT_PREVIEW_WINDOW_OPTS"
}

function pacrm() {
  local selection=$(__select_installed)

  if [ -n "$selection" ]; then
    local packages=("${(@f)$(echo $selection)}")
    local cmd="paru --remove ${packages[@]}"
    # echo "$cmd"
    print -s "$cmd"
    eval "$cmd"
  fi
}

pacrm
